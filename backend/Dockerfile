FROM node:18-alpine AS watcher
WORKDIR /app

ARG SERVER_PORT
ARG DATABASE_URL

ENV SERVER_PORT $SERVER_PORT
ENV DATABASE_URL $DATABASE_URL

EXPOSE $SERVER_PORT

CMD ["npm", "run", "dev"]



FROM node:18-alpine AS builder
WORKDIR /app

ARG SERVER_PORT
ARG DATABASE_URL

ENV SERVER_PORT $SERVER_PORT
ENV DATABASE_URL $DATABASE_URL

COPY . .

RUN npm run build

CMD ["npm", "run", "start"]
